# 20251109sun 

## 1 /frontで`npm run dev`した時と、Dockerで起動した際の挙動が異なる 
ローカルのnode_modulesでtanstackをインストール済みだったが、 
/frontディレクトリで`npm run dev`すると起動するが、 
dockerでstartすると起動しない。  
→docker-compose.ymlの設定が問題。ローカルのnode_modulesがマウントされて、docker内の依存関係が壊れていた、みたいな話。以下の書き方がいいらしいが、要確認。
```
volumes:
  - ./frontend:/app
  - /app/node_modules:/app/node_modules
  ```

## 2 `npm list`の依存関係の見方
`npm list @tanstack/react-query`  
├─┬ @tanstack/react-query-devtools@5.90.2  
│ └── @tanstack/react-query@5.90.7 deduped  
└── @tanstack/react-query@5.90.7  
直接の依存関係は、すべて自分で直接自分でインストールしたものである。  
例えば、AとBをインストール済みの際に、Aの中でBがAに依存していた場合、自動的に重複削除される、
逆にAのみインストールしていた際は、インストールしたAにBが依存しているツリーが自動的にできるらしい。  
#Next.js #Docker #npm 
